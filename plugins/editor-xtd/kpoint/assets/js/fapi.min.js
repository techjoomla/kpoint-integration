(function(){function af(b,n,m){if(b===n){return 0!==b||1/b==1/n}if(null==b||null==n){return b===n}b._chain&&(b=b._wrapped);n._chain&&(n=n._wrapped);if(b.isEqual&&ar.isFunction(b.isEqual)){return b.isEqual(n)}if(n.isEqual&&ar.isFunction(n.isEqual)){return n.isEqual(b)}var l=an.call(b);if(l!=an.call(n)){return !1}switch(l){case"[object String]":return b==""+n;case"[object Number]":return b!=+b?n!=+n:0==b?1/b==1/n:b==+n;case"[object Date]":case"[object Boolean]":return +b==+n;case"[object RegExp]":return b.source==n.source&&b.global==n.global&&b.multiline==n.multiline&&b.ignoreCase==n.ignoreCase}if("object"!=typeof b||"object"!=typeof n){return !1}for(var k=m.length;k--;){if(m[k]==b){return !0}}m.push(b);var k=0,j=!0;if("[object Array]"==l){if(k=b.length,j=k==n.length){for(;k--&&(j=k in b==k in n&&af(b[k],n[k],m));){}}}else{if("constructor" in b!="constructor" in n||b.constructor!=n.constructor){return !1}for(var i in b){if(ar.has(b,i)&&(k++,!(j=ar.has(n,i)&&af(b[i],n[i],m)))){break}}if(j){for(i in n){if(ar.has(n,i)&&!k--){break}}j=!k}}m.pop();return j}var ac=this,T=ac._,ak={},ao=Array.prototype,aj=Object.prototype,aq=ao.slice,Q=ao.unshift,an=aj.toString,g=aj.hasOwnProperty,R=ao.forEach,h=ao.map,ai=ao.reduce,ah=ao.reduceRight,ae=ao.filter,ad=ao.every,ab=ao.some,ag=ao.indexOf,Z=ao.lastIndexOf,aj=Array.isArray,f=Object.keys,aa=Function.prototype.bind,ar=function(b){return new am(b)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=ar),exports._=ar):ac._=ar;ar.VERSION="1.3.3";var ap=ar.each=ar.forEach=function(b,l,k){if(b!=null){if(R&&b.forEach===R){b.forEach(l,k)}else{if(b.length===+b.length){for(var j=0,i=b.length;j<i;j++){if(j in b&&l.call(k,b[j],j,b)===ak){break}}}else{for(j in b){if(ar.has(b,j)&&l.call(k,b[j],j,b)===ak){break}}}}}};ar.map=ar.collect=function(j,l,i){var k=[];if(j==null){return k}if(h&&j.map===h){return j.map(l,i)}ap(j,function(b,n,m){k[k.length]=l.call(i,b,n,m)});if(j.length===+j.length){k.length=j.length}return k};ar.reduce=ar.foldl=ar.inject=function(b,l,k,j){var i=arguments.length>2;b==null&&(b=[]);if(ai&&b.reduce===ai){j&&(l=ar.bind(l,j));return i?b.reduce(l,k):b.reduce(l)}ap(b,function(n,m,o){if(i){k=l.call(j,k,n,m,o)}else{k=n;i=true}});if(!i){throw new TypeError("Reduce of empty array with no initial value")}return k};ar.reduceRight=ar.foldr=function(b,m,l,k){var j=arguments.length>2;b==null&&(b=[]);if(ah&&b.reduceRight===ah){k&&(m=ar.bind(m,k));return j?b.reduceRight(m,l):b.reduceRight(m)}var i=ar.toArray(b).reverse();k&&!j&&(m=ar.bind(m,k));return j?ar.reduce(i,m,l,k):ar.reduce(i,m)};ar.find=ar.detect=function(j,l,i){var k;X(j,function(b,n,m){if(l.call(i,b,n,m)){k=b;return true}});return k};ar.filter=ar.select=function(j,l,i){var k=[];if(j==null){return k}if(ae&&j.filter===ae){return j.filter(l,i)}ap(j,function(b,n,m){l.call(i,b,n,m)&&(k[k.length]=b)});return k};ar.reject=function(j,l,i){var k=[];if(j==null){return k}ap(j,function(b,n,m){l.call(i,b,n,m)||(k[k.length]=b)});return k};ar.every=ar.all=function(j,l,i){var k=true;if(j==null){return k}if(ad&&j.every===ad){return j.every(l,i)}ap(j,function(b,n,m){if(!(k=k&&l.call(i,b,n,m))){return ak}});return !!k};var X=ar.some=ar.any=function(b,k,j){k||(k=ar.identity);var i=false;if(b==null){return i}if(ab&&b.some===ab){return b.some(k,j)}ap(b,function(m,l,n){if(i||(i=k.call(j,m,l,n))){return ak}});return !!i};ar.include=ar.contains=function(j,k){var i=false;if(j==null){return i}if(ag&&j.indexOf===ag){return j.indexOf(k)!=-1}return i=X(j,function(b){return b===k})};ar.invoke=function(b,j){var i=aq.call(arguments,2);return ar.map(b,function(k){return(ar.isFunction(j)?j||k:k[j]).apply(k,i)})};ar.pluck=function(b,i){return ar.map(b,function(j){return j[i]})};ar.max=function(b,k,j){if(!k&&ar.isArray(b)&&b[0]===+b[0]){return Math.max.apply(Math,b)}if(!k&&ar.isEmpty(b)){return -Infinity}var i={computed:-Infinity};ap(b,function(m,l,n){l=k?k.call(j,m,l,n):m;l>=i.computed&&(i={value:m,computed:l})});return i.value};ar.min=function(b,k,j){if(!k&&ar.isArray(b)&&b[0]===+b[0]){return Math.min.apply(Math,b)}if(!k&&ar.isEmpty(b)){return Infinity}var i={computed:Infinity};ap(b,function(m,l,n){l=k?k.call(j,m,l,n):m;l<i.computed&&(i={value:m,computed:l})});return i.value};ar.shuffle=function(j){var i=[],k;ap(j,function(b,l){k=Math.floor(Math.random()*(l+1));i[l]=i[k];i[k]=b});return i};ar.sortBy=function(b,k,j){var i=ar.isFunction(k)?k:function(l){return l[k]};return ar.pluck(ar.map(b,function(m,l,n){return{value:m,criteria:i.call(j,m,l,n)}}).sort(function(m,l){var o=m.criteria,n=l.criteria;return o===void 0?1:n===void 0?-1:o<n?-1:o>n?1:0}),"value")};ar.groupBy=function(b,k){var j={},i=ar.isFunction(k)?k:function(l){return l[k]};ap(b,function(m,l){var n=i(m,l);(j[n]||(j[n]=[])).push(m)});return j};ar.sortedIndex=function(b,m,l){l||(l=ar.identity);for(var k=0,j=b.length;k<j;){var i=k+j>>1;l(b[i])<l(m)?k=i+1:j=i}return k};ar.toArray=function(b){return !b?[]:ar.isArray(b)||ar.isArguments(b)?aq.call(b):b.toArray&&ar.isFunction(b.toArray)?b.toArray():ar.values(b)};ar.size=function(b){return ar.isArray(b)?b.length:ar.keys(b).length};ar.first=ar.head=ar.take=function(j,i,k){return i!=null&&!k?aq.call(j,0,i):j[0]};ar.initial=function(j,i,k){return aq.call(j,0,j.length-(i==null||k?1:i))};ar.last=function(j,i,k){return i!=null&&!k?aq.call(j,Math.max(j.length-i,0)):j[j.length-1]};ar.rest=ar.tail=function(j,i,k){return aq.call(j,i==null||k?1:i)};ar.compact=function(b){return ar.filter(b,function(i){return !!i})};ar.flatten=function(b,i){return ar.reduce(b,function(j,k){if(ar.isArray(k)){return j.concat(i?k:ar.flatten(k))}j[j.length]=k;return j},[])};ar.without=function(b){return ar.difference(b,aq.call(arguments,1))};ar.uniq=ar.unique=function(b,k,j){var j=j?ar.map(b,j):b,i=[];b.length<3&&(k=true);ar.reduce(j,function(n,m,l){if(k?ar.last(n)!==m||!n.length:!ar.include(n,m)){n.push(m);i.push(b[l])}return n},[]);return i};ar.union=function(){return ar.uniq(ar.flatten(arguments,true))};ar.intersection=ar.intersect=function(b){var i=aq.call(arguments,1);return ar.filter(ar.uniq(b),function(j){return ar.every(i,function(k){return ar.indexOf(k,j)>=0})})};ar.difference=function(b){var i=ar.flatten(aq.call(arguments,1),true);return ar.filter(b,function(j){return !ar.include(i,j)})};ar.zip=function(){for(var b=aq.call(arguments),k=ar.max(ar.pluck(b,"length")),j=Array(k),i=0;i<k;i++){j[i]=ar.pluck(b,""+i)}return j};ar.indexOf=function(b,k,j){if(b==null){return -1}var i;if(j){j=ar.sortedIndex(b,k);return b[j]===k?j:-1}if(ag&&b.indexOf===ag){return b.indexOf(k)}j=0;for(i=b.length;j<i;j++){if(j in b&&b[j]===k){return j}}return -1};ar.lastIndexOf=function(j,i){if(j==null){return -1}if(Z&&j.lastIndexOf===Z){return j.lastIndexOf(i)}for(var k=j.length;k--;){if(k in j&&j[k]===i){return k}}return -1};ar.range=function(j,i,n){if(arguments.length<=1){i=j||0;j=0}for(var n=arguments[2]||1,m=Math.max(Math.ceil((i-j)/n),0),l=0,k=Array(m);l<m;){k[l++]=j;j=j+n}return k};var V=function(){};ar.bind=function(b,k){var j,i;if(b.bind===aa&&aa){return aa.apply(b,aq.call(arguments,1))}if(!ar.isFunction(b)){throw new TypeError}i=aq.call(arguments,2);return j=function(){if(!(this instanceof j)){return b.apply(k,i.concat(aq.call(arguments)))}V.prototype=b.prototype;var l=new V,m=b.apply(l,i.concat(aq.call(arguments)));return Object(m)===m?m:l}};ar.bindAll=function(b){var i=aq.call(arguments,1);i.length==0&&(i=ar.functions(b));ap(i,function(j){b[j]=ar.bind(b[j],b)});return b};ar.memoize=function(b,j){var i={};j||(j=ar.identity);return function(){var k=j.apply(this,arguments);return ar.has(i,k)?i[k]:i[k]=b.apply(this,arguments)}};ar.delay=function(j,i){var k=aq.call(arguments,2);return setTimeout(function(){return j.apply(null,k)},i)};ar.defer=function(b){return ar.delay.apply(ar,[b,1].concat(aq.call(arguments,1)))};ar.throttle=function(r,q){var p,o,n,m,l,k,b=ar.debounce(function(){l=m=false},q);return function(){p=this;o=arguments;n||(n=setTimeout(function(){n=null;l&&r.apply(p,o);b()},q));m?l=true:k=r.apply(p,o);b();m=true;return k}};ar.debounce=function(j,i,l){var k;return function(){var m=this,b=arguments;l&&!k&&j.apply(m,b);clearTimeout(k);k=setTimeout(function(){k=null;l||j.apply(m,b)},i)}};ar.once=function(j){var i=false,k;return function(){if(i){return k}i=true;return k=j.apply(this,arguments)}};ar.wrap=function(j,i){return function(){var b=[j].concat(aq.call(arguments,0));return i.apply(this,b)}};ar.compose=function(){var b=arguments;return function(){for(var i=arguments,j=b.length-1;j>=0;j--){i=[b[j].apply(this,i)]}return i[0]}};ar.after=function(j,i){return j<=0?i():function(){if(--j<1){return i.apply(this,arguments)}}};ar.keys=f||function(b){if(b!==Object(b)){throw new TypeError("Invalid object")}var j=[],i;for(i in b){ar.has(b,i)&&(j[j.length]=i)}return j};ar.values=function(b){return ar.map(b,ar.identity)};ar.functions=ar.methods=function(b){var j=[],i;for(i in b){ar.isFunction(b[i])&&j.push(i)}return j.sort()};ar.extend=function(b){ap(aq.call(arguments,1),function(i){for(var j in i){b[j]=i[j]}});return b};ar.pick=function(b){var i={};ap(ar.flatten(aq.call(arguments,1)),function(j){j in b&&(i[j]=b[j])});return i};ar.defaults=function(b){ap(aq.call(arguments,1),function(i){for(var j in i){b[j]==null&&(b[j]=i[j])}});return b};ar.clone=function(b){return !ar.isObject(b)?b:ar.isArray(b)?b.slice():ar.extend({},b)};ar.tap=function(j,i){i(j);return j};ar.isEqual=function(j,i){return af(j,i,[])};ar.isEmpty=function(b){if(b==null){return true}if(ar.isArray(b)||ar.isString(b)){return b.length===0}for(var i in b){if(ar.has(b,i)){return false}}return true};ar.isElement=function(b){return !!(b&&b.nodeType==1)};ar.isArray=aj||function(b){return an.call(b)=="[object Array]"};ar.isObject=function(b){return b===Object(b)};ar.isArguments=function(b){return an.call(b)=="[object Arguments]"};ar.isArguments(arguments)||(ar.isArguments=function(b){return !(!b||!ar.has(b,"callee"))});ar.isFunction=function(b){return an.call(b)=="[object Function]"};ar.isString=function(b){return an.call(b)=="[object String]"};ar.isNumber=function(b){return an.call(b)=="[object Number]"};ar.isFinite=function(b){return ar.isNumber(b)&&isFinite(b)};ar.isNaN=function(b){return b!==b};ar.isBoolean=function(b){return b===true||b===false||an.call(b)=="[object Boolean]"};ar.isDate=function(b){return an.call(b)=="[object Date]"};ar.isRegExp=function(b){return an.call(b)=="[object RegExp]"};ar.isNull=function(b){return b===null};ar.isUndefined=function(b){return b===void 0};ar.has=function(j,i){return g.call(j,i)};ar.noConflict=function(){ac._=T;return this};ar.identity=function(b){return b};ar.times=function(j,i,l){for(var k=0;k<j;k++){i.call(l,k)}};ar.escape=function(b){return(""+b).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};ar.result=function(b,j){if(b==null){return null}var i=b[j];return ar.isFunction(i)?i.call(b):i};ar.mixin=function(b){ap(ar.functions(b),function(i){e(i,ar[i]=b[i])})};var d=0;ar.uniqueId=function(j){var i=d++;return j?j+i:i};ar.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Y=/.^/,al={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},W;for(W in al){al[al[W]]=W}var c=/\\|'|\r|\n|\t|\u2028|\u2029/g,a=/\\(\\|'|r|n|t|u2028|u2029)/g,U=function(b){return b.replace(a,function(j,i){return al[i]})};ar.template=function(b,k,j){j=ar.defaults(j||{},ar.templateSettings);b="__p+='"+b.replace(c,function(l){return"\\"+al[l]}).replace(j.escape||Y,function(m,l){return"'+\n_.escape("+U(l)+")+\n'"}).replace(j.interpolate||Y,function(m,l){return"'+\n("+U(l)+")+\n'"}).replace(j.evaluate||Y,function(m,l){return"';\n"+U(l)+"\n;__p+='"})+"';\n";j.variable||(b="with(obj||{}){\n"+b+"}\n");var b="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+b+"return __p;\n",i=new Function(j.variable||"obj","_",b);if(k){return i(k,ar)}k=function(l){return i.call(this,l,ar)};k.source="function("+(j.variable||"obj")+"){\n"+b+"}";return k};ar.chain=function(b){return ar(b).chain()};var am=function(b){this._wrapped=b};ar.prototype=am.prototype;var S=function(b,i){return i?ar(b).chain():b},e=function(b,i){am.prototype[b]=function(){var j=aq.call(arguments);Q.call(j,this._wrapped);return S(i.apply(ar,j),this._chain)}};ar.mixin(ar);ap("pop,push,reverse,shift,sort,splice,unshift".split(","),function(j){var i=ao[j];am.prototype[j]=function(){var k=this._wrapped;i.apply(k,arguments);var b=k.length;(j=="shift"||j=="splice")&&b===0&&delete k[0];return S(k,this._chain)}});ap(["concat","join","slice"],function(j){var i=ao[j];am.prototype[j]=function(){return S(i.apply(this._wrapped,arguments),this._chain)}});am.prototype.chain=function(){this._chain=true;return this};am.prototype.value=function(){return this._wrapped}}).call(this);var JSUtil=function(){return{extend:function(a){if(_.isFunction(a)){_.extend(this,a(this))}else{if(_.isObject(a)){_.extend(this,a)}}return this}}}();JSUtil.extend(function(){var a={hasExpectedParams:function(c){var b=_.keys(_.pick(c,this.expectedParams));return _.isEqual(b,this.expectedParams)},setOptions:function(b){var c=_.union(this.expectedParams,_.keys(this.optionalParams));b=_.pick(b,c);b=_.defaults(b,this.optionalParams);_.defaults(this,b);return this},allowEventBinding:function(){_.extend(this,JSUtil.EventManager);return this}};return{Class:a}});JSUtil.extend(function(){var a=/\s+/;var b={on:function(f,j,e){var d,h,g,c,i;if(!j){return this}f=f.split(a);d=this._callbacks||(this._callbacks={});while((h=f.shift())){i=d[h];g=i?i.tail:{};g.next=c={};g.context=e;g.callback=j;d[h]={tail:c,next:i?i.next:g}}return this},off:function(j,h,d){var c,k,e,g,f,i;if(!(k=this._callbacks)){return}if(!(j||h||d)){delete this._callbacks;return this}j=j?j.split(a):_.keys(k);while((c=j.shift())){e=k[c];delete k[c];if(!e||!(h||d)){continue}g=e.tail;while((e=e.next)!==g){f=e.callback;i=e.context;if((h&&f!==h)||(d&&i!==d)){this.on(c,f,i)}}}return this},trigger:function(k){var c,f,l,h,i,j,d;if(!(l=this._callbacks)){return this}j=l.all;k=k.split(a);d=Array.prototype.slice.call(arguments,1);while((c=k.shift())){if((f=l[c])){h=f.tail;while((f=f.next)!==h){try{f.callback.apply(f.context||this,d)}catch(g){if(console){console.log("ERROR: "+g.stack)}}}}if((f=j)){h=f.tail;i=[c].concat(d);while((f=f.next)!==h){try{f.callback.apply(f.context||this,i)}catch(g){if(console){console.log(g)}}}}}return this}};return{EventManager:b}});fAPI=function(o){var m=this;this.expectedParams=["player","token","video_id","host"];this.optionalParams={mode:"kpoint",logger:null};this.events={error:"evtError",stateChange:"evtStateChange",timeUpdate:"evtTimeUpdate",playerInit:"evtPlayerInit",tokenRefresh:"evtKvtokenRefresh"};this.values={NAME:"fAPI",TRACK_VIEW_PROGRESS_INTERVAL:15000,TIME_UPDATE_INTERVAL:200};this.playStates={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,REPLAY:5,KAPSULE_END:7};function a(q,p){if(m.player[q]){return(p)?m.player[q](p):m.player[q]()}}function j(){if(m.player.on){m.player.on("onStateChange",c);m.player.on("onPlayerInit",l);m.player.on("onTokenRefresh",b);m.player.on("onError",d)}else{m.player.addEventListener("onStateChange",c);m.player.addEventListener("onPlayerInit",l);m.player.addEventListener("onTokenRefresh",b);m.player.addEventListener("onError",d)}}function c(p){if(typeof p.data=="number"){m.trigger(m.events.stateChange,{state:p.data})}else{if(typeof p.data=="object"&&p.data.state!="undefined"){m.trigger(m.events.stateChange,p.data)}}}function l(p){m.trigger(m.events.playerInit,p)}function b(p){m.trigger(m.events.tokenRefresh,p)}function d(p){m.trigger(m.events.error,p)}function f(){var p=0;m._timer=setInterval(function(){var q=m.currentTime();if(q!=p){p=q;m.trigger(m.events.timeUpdate,{data:q})}},m.values.TIME_UPDATE_INTERVAL)}function g(){k();j();f()}function k(){var p=a("getIframe");if(!p){return}if(document.getElementById("widgets-container-"+m.video_id)){return}var q=p.parentNode;if(q){q.setAttribute("id","widgets-container-"+m.video_id);q.style.position="relative"}}this.log=function(p){console.log(p)};this.play=function(){return a("playVideo")};this.pause=function(){return a("pauseVideo")};this.stop=function(){return a("stopVideo")};this.currentTime=function(){return n()};this.duration=function(){return h()};this.bufferedFraction=function(){return e()};this.replay=function(){m.player.replayVideo?a("replayVideo"):a("playVideo")};this.seekTo=function(p){i(p)};this.playerState=function(){return a("getPlayState")};this.wait=function(){m.player.wait?a("wait"):m.pause()};this.kontinue=function(){m.player.kontinue?a("kontinue"):m.play()};this.kontinueWithoutPlay=function(){m.player.kontinueWithoutPlay?a("kontinueWithoutPlay"):function(){return}};this.playKapsule=function(){m.player.playKapsule?a("playKapsule"):m.play()};function n(){var p=a("getCurrentTime");if(m.mode=="youtube"){p=p*1000}return p}function h(){var p=a("getDuration");if(m.mode=="youtube"){p=p*1000}return p}function e(){var p=a("getVideoLoadedFraction");if(m.mode=="youtube"){p=p*100}return p}function i(p){if(m.mode=="youtube"){p=p/1000}a("seekTo",p)}_.extend(this,JSUtil.Class);if(!this.hasExpectedParams(o)){throw new Error("Missing expected parameter")}this.setOptions(o);this.allowEventBinding();if(!m.logger&&window.Logger){m.logger=new Logger({level:"debug"})}g()};var Player=function(m,e){var t=this;var y;var z=1;var A=[];var o={};var f={currentTime:0,duration:0,playState:-1,videoPlayedFraction:0,videoLoadedFraction:0,kapsuleUrl:"",volume:100,muted:false,kapsuleDeatils:{gconfid:"gcc-",kvtoken:0}};this.apiInterface=["playVideo","pauseVideo","stopVideo","seekTo","replayVideo","wait","kontinue","kontinueWithoutPlay","getCurrentTime","getDuration","getVideoLoadedFraction","getVideoPlayedFraction","getPlayState","getVolume","isMuted"];var u={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3};var q={width:"640px",height:"360px",title:"kPoint Kapsule Player"};this.values={NAME:"Kpoint Iframe API"};var l=function(){if(e==null||e.kapsuleId==null){return}g(e);h();E();F();return b()};var b=function(){var G=new fAPI({player:t,mode:"kpoint",token:"kvToken",video_id:c(t.playerAttributes,"kapsuleId"),host:c(t.playerAttributes,"domain"),container:"widgets-container"});return G};var g=function(){t.playerAttributes={given:e,defaults:q}};var c=function(G,I){var K;for(var J=[G.given,G.defaults],H=0;H<J.length;H++){K=J[H][I];if(K){return K}}return null};var h=function(){iframePlaceHolder=(typeof m=="string")?document.getElementById(m):m;a(iframePlaceHolder);y=p(iframePlaceHolder);var G=iframePlaceHolder.parentNode;if(G){G.replaceChild(y,iframePlaceHolder)}};var a=function(I){var H=document.createElement("div");H.setAttribute("id","widgets-container-"+c(t.playerAttributes,"kapsuleId"));var G=I.parentNode;G.insertBefore(H,I);H.appendChild(I);H.style.display="inline-block"};var p=function(J){var H=document.createElement("iframe");var K;for(var G=0,I=J.attributes;G<I.length;G++){K=I[G].value;if(K&&K!=""&&K!="null"){H.setAttribute(I[G].name,K)}}H.setAttribute("src",s(c(t.playerAttributes,"kapsuleId")));H.setAttribute("width",c(t.playerAttributes,"width"));H.setAttribute("height",c(t.playerAttributes,"height"));H.setAttribute("title",c(t.playerAttributes,"title"));H.setAttribute("allowfullscreen",true);return H};var s=function(H){var K=c(t.playerAttributes,"domain")||"";var G=v();var J=k();var N=j();var I=B();var L=n("trackingParams");var M=n("params");return K+"/kapsule/"+H+"/v"+N+"/embedded?np=1&iframefAPI=true"+J+I+G+L+M};var n=function(J){var I=c(t.playerAttributes,J)||"";var H="";for(var G in I){if(typeof(I[G])!="object"){H+="&"+G+"="+I[G];continue}for(var K in I[G]){H+="&"+K+"="+I[G][K]}}return H};var j=function(){var G=c(t.playerAttributes,"version")||2;return !isNaN(G)?G:1};var B=function(){var G=c(t.playerAttributes,"size");return G?"&size="+G.toUpperCase():""};var k=function(){var G=c(t.playerAttributes,"autoplay")||"";if(G==""||G==false){return""}return"&autoplay=true"};var v=function(){var G=c(t.playerAttributes,"tokenParams")||"";if(G==""){return G}if(G&&G.type=="OAUTH"){G="&oauth_token="+G.type;return G}if(G&&G.type=="TOKEN"){G="&client_id="+G.clientId+"&user_email="+G.userEmail+"&user_name="+G.userName+"&challenge="+G.challenge+"&xauth_token="+G.xauth_token;return G}};var F=function(){var H=c(t.playerAttributes,"events");for(var G in H){if(H.hasOwnProperty(G)){t.addEventListener(G,H[G])}}};var C=function(H,I,K,J){var G=o&&o[H]?o[H]:[];o[H]=G;A[z]=H;A[z+1]=K;A[z+2]=I;A[z+3]=J;G.push(z);z=z+4};this.addEventListener=function(G,I,K){var J=I;var H=I.name;if(typeof G=="string"&&typeof I!="function"){J=function(){window[I].apply(window,arguments,K)};H=I}C(G,H,J)};this.removeEventListener=function(H,I,J){var G=o[H];for(index in G){if(A[G[index]]==H&&A[(G[index]+2)]==I&&A[(G[index]+3)]==J){G.splice(index,1);break}}};this.getIframe=function(){return y};this.playVideo=function(){return d("play")};this.replayVideo=function(){return d("replay")};this.pauseVideo=function(){return d("pause")};this.stopVideo=function(){return d("stop")};this.seekTo=function(G){return d("seek",G)};this.wait=function(){return d("wait")};this.kontinue=function(){return d("kontinue")};this.kontinueWithoutPlay=function(){return d("kontinueWithoutPlay")};var E=function(){Array.prototype.forEach.call(t.apiInterface,function(G){if(D(G)){this[G]=function(){var H=G.search("get")==0?3:2;return f[G.charAt(H).toLowerCase()+G.substr(H+1)]}}},t)};var D=function(G){return G.search("get")==0||G.search("is")==0};var d=function(){if(arguments.length==0){return}MessageDispatcher.dispatch(y.contentWindow,"*",{action:arguments[0],args:Array.prototype.slice.call(arguments,1)})};var r=function(I){var H=JSON.parse(I.data);if(H.source.indexOf("kPoint")==-1&&H.id!==c(t.playerAttributes,"kapsuleId")){return}switch(H.event){case"infoDelivery":i(H);break;case"error":x(H);break;default:var G={target:t,data:H.info};w(H.event,G);break}};var i=function(G){var I=G.info;for(var H in I){f[H]=I[H]}};var w=function(L,K){var G=o[L];var J;var I=Array.prototype.slice.call(arguments,1);for(var H in G){J=G[H];A[J+1].apply(A[J+2],I)}};var x=function(G){};window.addEventListener?window.addEventListener("message",r):window.attachEvent("onmessage",r);return l()};MessageDispatcher={dispatch:function(b,a,c){b.postMessage(JSON.stringify(c),a)}};(function(){if(window.onKPointIframeAPIReady){window.onKPointIframeAPIReady()}})();
